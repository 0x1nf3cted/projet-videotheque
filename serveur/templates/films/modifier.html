{% extends "base.html" %}

{% block title %}Modifier {{ film.titre }}{% endblock %}

{% block content %}
<h1>Modifier {{ film.titre }}</h1>

<form method="POST" class="film-form" enctype="multipart/form-data">
    <div>
        <label for="titre">Titre *</label>
        <input type="text" id="titre" name="titre" value="{{ film.titre }}" required>
    </div>
    
    <div>
        <label for="realisateur">Réalisateur</label>
        <input type="text" id="realisateur" name="realisateur" value="{{ film.realisateur or '' }}">
    </div>
    
    <div>
        <label for="annee">Année</label>
        <input type="number" id="annee" name="annee" value="{{ film.annee or '' }}" min="1900" max="2100">
    </div>
    
    <div>
        <label for="genre">Genre</label>
        <input type="text" id="genre" name="genre" value="{{ film.genre or '' }}">
    </div>
    
    <div>
        <label for="format">Format</label>
        <select id="format" name="format">
            <option value="numérique" {% if film.format == 'numérique' %}selected{% endif %}>Numérique</option>
            <option value="DVD" {% if film.format == 'DVD' %}selected{% endif %}>DVD</option>
            <option value="Blu-ray" {% if film.format == 'Blu-ray' %}selected{% endif %}>Blu-ray</option>
        </select>
    </div>
    
    <div>
        <label for="duree">Durée (minutes)</label>
        <input type="number" id="duree" name="duree" value="{{ film.duree or 0 }}" min="0">
    </div>
    
    <div>
        <label for="resume">Résumé</label>
        <textarea id="resume" name="resume" rows="5">{{ film.resume or '' }}</textarea>
    </div>
    
    <div>
        <label for="note">Note (sur 10)</label>
        <input type="number" id="note" name="note" value="{{ film.note or 0 }}" min="0" max="10" step="0.1">
    </div>
    
    <div>
        <label for="image">Image ( max 5MB)</label>
        {% if film.image %}
            <div style="margin-bottom: 10px;">
                <p>Image actuelle:</p>
                <img src="{{ api_url }}/api/images/{{ film.image }}" alt="{{ film.titre }}" style="max-width: 200px; max-height: 200px; border: 1px solid #ddd; padding: 5px;">
                <small style="display: block; margin-top: 5px;">Télécharger une nouvelle image pour la remplacer</small>
            </div>
        {% endif %}
        <input type="file" id="image" name="image" accept="image/jpeg,image/png,image/gif">
        <small>Format accepté: JPG, PNG, GIF. Taille maximale: 5MB</small>
    </div>
    
    <button type="submit">Enregistrer</button>
    <a href="{{ url_for('details_film', id=film.id) }}">Annuler</a>
</form>
{% endblock %}

