{% extends "base.html" %}

{% block title %}Mes favoris{% endblock %}

{% block content %}
<h1>Mes favoris</h1>

{% if films %}
<p>{{ films|length }} film(s) favori(s)</p>
<div class="films-grid">
    {% for film in films %}
    <div class="film-card">
        {% if film.image %}
        <div class="film-poster {% if film.emprunt and film.emprunt.user_id %}emprunte{% endif %}">
            <img src="{{ api_url }}/api/images/{{ film.image }}" alt="{{ film.titre }}" loading="lazy">
        </div>
        {% elif film.image_url %}
        <div class="film-poster {% if film.emprunt and film.emprunt.user_id %}emprunte{% endif %}">
            <img src="{{ film.image_url }}" alt="{{ film.titre }}" loading="lazy">
        </div>
        {% endif %}
        <h3><a href="{{ url_for('details_film', id=film.id) }}">{{ film.titre }}</a></h3>
        <p><strong>Réalisateur:</strong> {{ film.realisateur }}</p>
        <p><strong>Année:</strong> {{ film.annee }}</p>
        <p><strong>Genre:</strong> {{ film.genre }}</p>
        <p><strong>Note:</strong> {{ film.note }}/10</p>
        {% if film.emprunt and film.emprunt.user_id %}
        <p><strong>Status:</strong> <span style="color: #c33;">Emprunté</span></p>
        {% endif %}
        <div class="film-actions">
            <a href="{{ url_for('details_film', id=film.id) }}" class="film-card-action" title="Voir les détails">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                </svg>
            </a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<p>Aucun film en favoris.</p>
{% endif %}

<p><a href="{{ url_for('liste_films') }}">Retour à la liste</a></p>
{% endblock %}

